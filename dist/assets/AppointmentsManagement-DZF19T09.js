import{c as Y,r as g,h as M,w as H,e as ot,v as B,ao as nt,ap as X,ax as q,aC as it,j as t,ae as lt,a2 as U,ak as dt,d as ct,U as ht,aD as ut,aj as mt,az as xt}from"./ui-N7HjBcuT.js";import{B as F,C as O,a as V,f as _,g as G,I as E,S as T,b as A,c as P,d as D,e as v,n as J,D as gt,p as ft,q as pt,r as bt,s as vt,L as j,t as yt}from"./index-D9rRU7mG.js";import"./vendor-D3F3s8fL.js";import"./supabase-BXl3LOEh.js";function jt(o){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",s.appendChild(a),a.styleSheet?a.styleSheet.cssText=o:a.appendChild(document.createTextNode(o))}Array(12).fill(0);let $=1;class wt{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const a=this.subscribers.indexOf(s);this.subscribers.splice(a,1)}),this.publish=s=>{this.subscribers.forEach(a=>a(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var a;const{message:n,...w}=s,c=typeof s?.id=="number"||((a=s.id)==null?void 0:a.length)>0?s.id:$++,x=this.toasts.find(p=>p.id===c),S=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),x?this.toasts=this.toasts.map(p=>p.id===c?(this.publish({...p,...s,id:c,title:n}),{...p,...s,id:c,dismissible:S,title:n}):p):this.addToast({title:n,...w,dismissible:S,id:c}),c},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(a=>a({id:s,dismiss:!0})))):this.toasts.forEach(a=>{this.subscribers.forEach(n=>n({id:a.id,dismiss:!0}))}),s),this.message=(s,a)=>this.create({...a,message:s}),this.error=(s,a)=>this.create({...a,message:s,type:"error"}),this.success=(s,a)=>this.create({...a,type:"success",message:s}),this.info=(s,a)=>this.create({...a,type:"info",message:s}),this.warning=(s,a)=>this.create({...a,type:"warning",message:s}),this.loading=(s,a)=>this.create({...a,type:"loading",message:s}),this.promise=(s,a)=>{if(!a)return;let n;a.loading!==void 0&&(n=this.create({...a,promise:s,type:"loading",message:a.loading,description:typeof a.description!="function"?a.description:void 0}));const w=Promise.resolve(s instanceof Function?s():s);let c=n!==void 0,x;const S=w.then(async i=>{if(x=["resolve",i],Y.isValidElement(i))c=!1,this.create({id:n,type:"default",message:i});else if(St(i)&&!i.ok){c=!1;const h=typeof a.error=="function"?await a.error(`HTTP error! status: ${i.status}`):a.error,N=typeof a.description=="function"?await a.description(`HTTP error! status: ${i.status}`):a.description,C=typeof h=="object"&&!Y.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:N,...C})}else if(i instanceof Error){c=!1;const h=typeof a.error=="function"?await a.error(i):a.error,N=typeof a.description=="function"?await a.description(i):a.description,C=typeof h=="object"&&!Y.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:N,...C})}else if(a.success!==void 0){c=!1;const h=typeof a.success=="function"?await a.success(i):a.success,N=typeof a.description=="function"?await a.description(i):a.description,C=typeof h=="object"&&!Y.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:N,...C})}}).catch(async i=>{if(x=["reject",i],a.error!==void 0){c=!1;const y=typeof a.error=="function"?await a.error(i):a.error,h=typeof a.description=="function"?await a.description(i):a.description,R=typeof y=="object"&&!Y.isValidElement(y)?y:{message:y};this.create({id:n,type:"error",description:h,...R})}}).finally(()=>{c&&(this.dismiss(n),n=void 0),a.finally==null||a.finally.call(a)}),p=()=>new Promise((i,y)=>S.then(()=>x[0]==="reject"?y(x[1]):i(x[1])).catch(y));return typeof n!="string"&&typeof n!="number"?{unwrap:p}:Object.assign(n,{unwrap:p})},this.custom=(s,a)=>{const n=a?.id||$++;return this.create({jsx:s(n),id:n,...a}),n},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const f=new wt,Nt=(o,s)=>{const a=s?.id||$++;return f.addToast({title:o,...s,id:a}),a},St=o=>o&&typeof o=="object"&&"ok"in o&&typeof o.ok=="boolean"&&"status"in o&&typeof o.status=="number",Ct=Nt,kt=()=>f.toasts,Et=()=>f.getActiveToasts(),I=Object.assign(Ct,{success:f.success,info:f.info,warning:f.warning,error:f.error,custom:f.custom,message:f.message,promise:f.promise,dismiss:f.dismiss,loading:f.loading},{getHistory:kt,getToasts:Et});jt("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Rt({appointments:o=[],onUpdate:s}){const[a,n]=g.useState(""),[w,c]=g.useState("전체"),[x,S]=g.useState("전체"),[p,i]=g.useState(!1),[y,h]=g.useState(!1),[N,R]=g.useState(!1),[C,K]=g.useState(null),[r,b]=g.useState({patientName:"",patientPhone:"",doctorName:"",service:"",date:"",time:"",status:"예약접수",type:"일반",notes:""}),k=[{value:"예약접수",label:"예약접수",color:"bg-blue-100 text-blue-800",icon:M},{value:"확정",label:"확정",color:"bg-green-100 text-green-800",icon:H},{value:"승인대기",label:"승인대기",color:"bg-yellow-100 text-yellow-800",icon:ot},{value:"진찰중",label:"진찰중",color:"bg-purple-100 text-purple-800",icon:B},{value:"치료중",label:"치료중",color:"bg-indigo-100 text-indigo-800",icon:B},{value:"완료",label:"완료",color:"bg-emerald-100 text-emerald-800",icon:H},{value:"취소",label:"취소",color:"bg-gray-100 text-gray-800",icon:nt},{value:"노쇼",label:"노쇼",color:"bg-red-100 text-red-800",icon:X},{value:"연기",label:"연기",color:"bg-orange-100 text-orange-800",icon:q},{value:"보류",label:"보류",color:"bg-slate-100 text-slate-800",icon:it}],Q=g.useMemo(()=>k.map(l=>{const u=o.filter(d=>d.status===l.value).length,m=o.length>0?Math.round(u/o.length*100):0;return{...l,count:u,percentage:m}}),[o]),z=g.useMemo(()=>{const e=o.filter(d=>d.status==="노쇼"),l=e.length,u=new Set(e.map(d=>d.patientPhone)).size,m=o.filter(d=>(d.noShowCount||0)>1).length;return{totalNoShows:l,uniqueNoShowPatients:u,repeatNoShowPatients:m,noShowRate:o.length>0?Math.round(l/o.length*100):0}},[o]),L=g.useMemo(()=>o.filter(e=>{const l=e.patientName.toLowerCase().includes(a.toLowerCase())||e.patientPhone.includes(a)||e.doctorName.toLowerCase().includes(a.toLowerCase())||e.service.toLowerCase().includes(a.toLowerCase()),u=w==="전체"||e.status===w,m=x==="전체"||e.date===x;return l&&u&&m}),[o,a,w,x]),W=(e,l)=>{const u=o.map(m=>{if(m.id===e){const d={...m,status:l};return l==="노쇼"&&(d.noShowCount=(m.noShowCount||0)+1,d.lastNoShowDate=new Date().toISOString().split("T")[0],d.notes=m.notes+" [노쇼 처리됨]"),d}return m});s(u),I.success(`${l}로 상태가 변경되었습니다.`)},Z=e=>{K(e),b({...e,id:void 0,status:"예약접수",date:"",time:"",notes:`[노쇼 재예약] ${e.notes}`}),i(!0)},tt=()=>{if(!r.patientName||!r.patientPhone||!r.date||!r.time){I.error("필수 정보를 모두 입력해주세요.");return}const e={id:Math.max(...o.map(l=>l.id),0)+1,patientName:r.patientName,patientPhone:r.patientPhone,doctorName:r.doctorName||"미정",service:r.service||"상담",date:r.date,time:r.time,status:r.status||"예약접수",type:r.type||"일반",notes:r.notes||"",createdAt:new Date().toLocaleString(),noShowCount:0,lastNoShowDate:null};s([...o,e]),i(!1),b({patientName:"",patientPhone:"",doctorName:"",service:"",date:"",time:"",status:"예약접수",type:"일반",notes:""}),I.success("예약이 추가되었습니다.")},et=e=>{const l=o.filter(u=>u.id!==e);s(l),I.success("예약이 삭제되었습니다.")},at=e=>k.find(u=>u.value===e)?.color||"bg-gray-100 text-gray-800",st=e=>k.find(u=>u.value===e)?.icon||xt,rt=g.useMemo(()=>["전체",...[...new Set(o.map(l=>l.date))].sort()],[o]);return t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-cyan-100 p-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-600 to-cyan-800 bg-clip-text text-transparent",children:"예약 관리"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"환자 예약 현황 및 상태 관리"})]}),t.jsxs(F,{onClick:()=>i(!0),className:"bg-gradient-to-r from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700",children:[t.jsx(lt,{className:"w-4 h-4 mr-2"}),"새 예약 등록"]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Q.slice(0,5).map(e=>{const l=e.icon;return t.jsx(O,{className:"relative overflow-hidden border-0 shadow-lg hover:shadow-xl transition-all duration-300",children:t.jsx(V,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.label}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.count}),t.jsxs("span",{className:"text-xs text-gray-500",children:[e.percentage,"%"]})]})]}),t.jsx("div",{className:`p-3 rounded-xl ${e.color.replace("text-","bg-").replace("800","600")} bg-opacity-20`,children:t.jsx(l,{className:`w-6 h-6 ${e.color.replace("bg-","text-").replace("100","600")}`})})]})})},e.value)})}),t.jsxs(O,{className:"bg-gradient-to-r from-red-50 to-orange-50 border-red-200",children:[t.jsx(_,{className:"pb-4",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-3 bg-red-100 rounded-xl",children:t.jsx(X,{className:"w-6 h-6 text-red-600"})}),t.jsxs("div",{children:[t.jsx(G,{className:"text-red-800",children:"노쇼 관리 현황"}),t.jsx("p",{className:"text-red-600 text-sm",children:"환자 노쇼 패턴 및 관리"})]})]})}),t.jsxs(V,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-red-700",children:z.totalNoShows}),t.jsx("p",{className:"text-sm text-red-600",children:"총 노쇼 건수"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-orange-700",children:z.uniqueNoShowPatients}),t.jsx("p",{className:"text-sm text-orange-600",children:"노쇼 환자 수"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-2xl font-bold text-red-700",children:z.repeatNoShowPatients}),t.jsx("p",{className:"text-sm text-red-600",children:"재 노쇼 환자"})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("p",{className:"text-2xl font-bold text-red-700",children:[z.noShowRate,"%"]}),t.jsx("p",{className:"text-sm text-red-600",children:"노쇼율"})]})]}),z.totalNoShows>0&&t.jsxs("div",{className:"mt-4 p-4 bg-orange-100 rounded-lg border border-orange-200",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(U,{className:"w-5 h-5 text-orange-600"}),t.jsx("p",{className:"text-orange-800 font-medium",children:"노쇼 관리 알림"})]}),t.jsx("p",{className:"text-orange-700 text-sm mt-1",children:"노쇼율이 높습니다. 예약 확인 시스템을 점검하고 재예약 프로세스를 개선해주세요."})]})]})]}),t.jsx(O,{className:"shadow-lg border-0",children:t.jsx(V,{className:"p-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx(E,{placeholder:"환자명, 전화번호, 의료진, 진료과목으로 검색...",value:a,onChange:e=>n(e.target.value),className:"pl-10"})]})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(T,{value:w,onValueChange:c,children:[t.jsx(A,{className:"w-40",children:t.jsx(P,{placeholder:"상태 선택"})}),t.jsxs(D,{children:[t.jsx(v,{value:"전체",children:"모든 상태"}),k.map(e=>t.jsx(v,{value:e.value,children:e.label},e.value))]})]}),t.jsxs(T,{value:x,onValueChange:S,children:[t.jsx(A,{className:"w-40",children:t.jsx(P,{placeholder:"날짜 선택"})}),t.jsx(D,{children:rt.map(e=>t.jsx(v,{value:e,children:e},e))})]})]})]})})}),t.jsxs(O,{className:"shadow-lg border-0",children:[t.jsx(_,{children:t.jsxs(G,{className:"flex items-center space-x-2",children:[t.jsx(M,{className:"w-5 h-5"}),t.jsxs("span",{children:["예약 목록 (",L.length,"건)"]})]})}),t.jsx(V,{children:t.jsx("div",{className:"space-y-4",children:L.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(M,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:"등록된 예약이 없습니다."})]}):L.map(e=>{const l=st(e.status),u=e.status==="노쇼",m=(e.noShowCount||0)>1;return t.jsx("div",{className:`p-6 border-2 rounded-xl transition-all duration-300 hover:shadow-lg ${u?"border-red-200 bg-red-50":m?"border-orange-200 bg-orange-50":"border-gray-200 bg-white hover:border-cyan-200"}`,children:t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between space-y-4 lg:space-y-0",children:[t.jsxs("div",{className:"flex-1 space-y-3",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:e.patientName}),t.jsxs(J,{className:`${at(e.status)} border-0`,children:[t.jsx(l,{className:"w-3 h-3 mr-1"}),e.status]}),m&&t.jsxs(J,{className:"bg-orange-100 text-orange-800 border-0",children:[t.jsx(U,{className:"w-3 h-3 mr-1"}),"재노쇼"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ct,{className:"w-4 h-4"}),t.jsx("span",{children:e.patientPhone})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ht,{className:"w-4 h-4"}),t.jsx("span",{children:e.doctorName})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(M,{className:"w-4 h-4"}),t.jsxs("span",{children:[e.date," ",e.time]})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(ut,{className:"w-4 h-4"}),t.jsx("span",{children:e.service})]})]})]})}),e.notes&&t.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:t.jsx("p",{className:"text-sm text-gray-700",children:e.notes})}),(e.noShowCount||0)>0&&t.jsx("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(X,{className:"w-4 h-4 text-red-600"}),t.jsxs("span",{className:"text-red-800 font-medium",children:["노쇼 이력: ",e.noShowCount,"회"]}),e.lastNoShowDate&&t.jsxs("span",{className:"text-red-600 text-sm",children:["(최근: ",e.lastNoShowDate,")"]})]})})]}),t.jsxs("div",{className:"flex flex-col space-y-2",children:[t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs(T,{value:e.status,onValueChange:d=>W(e.id,d),children:[t.jsx(A,{className:"w-32",children:t.jsx(P,{})}),t.jsx(D,{children:k.map(d=>t.jsx(v,{value:d.value,children:d.label},d.value))})]}),u&&t.jsxs(F,{variant:"outline",size:"sm",onClick:()=>Z(e),className:"border-orange-300 text-orange-700 hover:bg-orange-50",children:[t.jsx(q,{className:"w-4 h-4 mr-1"}),"재예약"]}),t.jsx(F,{variant:"outline",size:"sm",onClick:()=>et(e.id),className:"border-red-300 text-red-700 hover:bg-red-50",children:t.jsx(mt,{className:"w-4 h-4"})})]}),t.jsxs("p",{className:"text-xs text-gray-500 text-right",children:["등록: ",e.createdAt]})]})]})},e.id)})})})]}),t.jsx(gt,{open:p,onOpenChange:i,children:t.jsxs(ft,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxs(pt,{children:[t.jsx(bt,{children:"새 예약 등록"}),t.jsx(vt,{children:"새로운 환자 예약을 등록합니다."})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx(j,{htmlFor:"patientName",children:"환자명 *"}),t.jsx(E,{id:"patientName",value:r.patientName||"",onChange:e=>b({...r,patientName:e.target.value}),placeholder:"환자명을 입력하세요"})]}),t.jsxs("div",{children:[t.jsx(j,{htmlFor:"patientPhone",children:"연락처 *"}),t.jsx(E,{id:"patientPhone",value:r.patientPhone||"",onChange:e=>b({...r,patientPhone:e.target.value}),placeholder:"010-0000-0000"})]}),t.jsxs("div",{children:[t.jsx(j,{htmlFor:"doctorName",children:"담당의"}),t.jsxs(T,{value:r.doctorName||"",onValueChange:e=>b({...r,doctorName:e}),children:[t.jsx(A,{children:t.jsx(P,{placeholder:"담당의 선택"})}),t.jsxs(D,{children:[t.jsx(v,{value:"오진수",children:"오진수 원장"}),t.jsx(v,{value:"김민지",children:"김민지 부원장"})]})]})]}),t.jsxs("div",{children:[t.jsx(j,{htmlFor:"service",children:"진료과목"}),t.jsx(E,{id:"service",value:r.service||"",onChange:e=>b({...r,service:e.target.value}),placeholder:"임플란트, 교정, 스케일링 등"})]}),t.jsxs("div",{children:[t.jsx(j,{htmlFor:"date",children:"예약날짜 *"}),t.jsx(E,{id:"date",type:"date",value:r.date||"",onChange:e=>b({...r,date:e.target.value})})]}),t.jsxs("div",{children:[t.jsx(j,{htmlFor:"time",children:"예약시간 *"}),t.jsx(E,{id:"time",type:"time",value:r.time||"",onChange:e=>b({...r,time:e.target.value})})]}),t.jsxs("div",{children:[t.jsx(j,{htmlFor:"status",children:"상태"}),t.jsxs(T,{value:r.status||"예약접수",onValueChange:e=>b({...r,status:e}),children:[t.jsx(A,{children:t.jsx(P,{})}),t.jsx(D,{children:k.map(e=>t.jsx(v,{value:e.value,children:e.label},e.value))})]})]}),t.jsxs("div",{children:[t.jsx(j,{htmlFor:"type",children:"예약 유형"}),t.jsxs(T,{value:r.type||"일반",onValueChange:e=>b({...r,type:e}),children:[t.jsx(A,{children:t.jsx(P,{})}),t.jsxs(D,{children:[t.jsx(v,{value:"상담",children:"상담"}),t.jsx(v,{value:"일반",children:"일반 진료"}),t.jsx(v,{value:"치료",children:"치료"}),t.jsx(v,{value:"응급",children:"응급"})]})]})]})]}),t.jsxs("div",{children:[t.jsx(j,{htmlFor:"notes",children:"메모"}),t.jsx(yt,{id:"notes",value:r.notes||"",onChange:e=>b({...r,notes:e.target.value}),placeholder:"특이사항이나 메모를 입력하세요",rows:3})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx(F,{variant:"outline",onClick:()=>i(!1),children:"취소"}),t.jsx(F,{onClick:tt,children:"예약 등록"})]})]})})]})}export{Rt as default};
