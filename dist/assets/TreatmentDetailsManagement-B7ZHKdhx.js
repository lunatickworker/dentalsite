import{r as g,j as e,ae as G,ak as U,i as L,az as X,aA as _,ai as J,aj as K,c as Q,X as W,am as Y}from"./ui-ChaMvfLm.js";import{D as M,o as V,B as x,C as k,a as A,I as N,S as w,b as C,c as D,d as S,e as h,f as Z,g as ee,n as F,p as se,q as te,r as re,s as ae,L as p,t as ie}from"./index-BwfpsJi4.js";import"./vendor-D3F3s8fL.js";import"./supabase-BXl3LOEh.js";const O=[{id:"implant",title:"임플란트"},{id:"orthodontics",title:"교정치료"},{id:"aesthetic",title:"심미치료"},{id:"general",title:"일반진료"}];function xe(){const[l,m]=g.useState([{id:"implant-general",title:"일반 임플란트",category:"implant",description:"단일 치아 임플란트",order:1,status:"활성",price:"1,200,000원",duration:"3개월"},{id:"implant-immediate",title:"즉시 임플란트",category:"implant",description:"발치 후 즉시 식립",order:2,status:"활성",price:"1,500,000원",duration:"2개월"},{id:"implant-navigation",title:"네비게이션 임플란트",category:"implant",description:"정밀 가이드 시술",order:3,status:"활성",price:"1,800,000원",duration:"3개월"},{id:"implant-allon4",title:"All-on-4",category:"implant",description:"전악 임플란트",order:4,status:"활성",price:"15,000,000원",duration:"6개월"},{id:"ortho-invisible",title:"투명교정",category:"orthodontics",description:"인비절라인",order:1,status:"활성",price:"6,000,000원",duration:"18개월"},{id:"ortho-lingual",title:"설측교정",category:"orthodontics",description:"혀쪽 브라켓",order:2,status:"활성",price:"8,000,000원",duration:"24개월"},{id:"ortho-partial",title:"부분교정",category:"orthodontics",description:"앞니 교정",order:3,status:"활성",price:"2,500,000원",duration:"12개월"},{id:"aesthetic-laminate",title:"라미네이트",category:"aesthetic",description:"앞니 성형",order:1,status:"활성",price:"700,000원",duration:"2주"},{id:"aesthetic-crown",title:"올세라믹",category:"aesthetic",description:"자연스러운 크라운",order:2,status:"활성",price:"800,000원",duration:"2주"},{id:"aesthetic-whitening",title:"치아미백",category:"aesthetic",description:"전문 미백 시술",order:3,status:"활성",price:"400,000원",duration:"1주"},{id:"general-cavity",title:"충치치료",category:"general",description:"레진/아말감",order:1,status:"활성",price:"150,000원",duration:"1일"},{id:"general-root",title:"신경치료",category:"general",description:"근관치료",order:2,status:"활성",price:"400,000원",duration:"2주"},{id:"general-scaling",title:"스케일링",category:"general",description:"치석제거",order:3,status:"활성",price:"100,000원",duration:"1일"}]),[j,i]=g.useState(""),[c,b]=g.useState("전체"),[a,n]=g.useState("전체"),[B,v]=g.useState(null),[q,T]=g.useState(!1),H={id:"",title:"",category:"implant",description:"",order:1,status:"활성",price:"",duration:""},I=l.filter(t=>{const r=t.title.toLowerCase().includes(j.toLowerCase())||t.description.toLowerCase().includes(j.toLowerCase()),s=c==="전체"||t.category===c,o=a==="전체"||t.status===a;return r&&s&&o}).sort((t,r)=>t.category!==r.category?t.category.localeCompare(r.category):t.order-r.order).reduce((t,r)=>{const s=O.find(o=>o.id===r.category)?.title||r.category;return t[s]||(t[s]=[]),t[s].push(r),t},{}),E=t=>{if(t.id)m(r=>r.map(s=>s.id===t.id?{...t,updatedAt:new Date().toISOString().split("T")[0]}:s));else{const r=`${t.category}-${Date.now()}`,s=l.filter(d=>d.category===t.category),o=Math.max(...s.map(d=>d.order),0)+1,y={...t,id:r,order:o,createdAt:new Date().toISOString().split("T")[0],updatedAt:new Date().toISOString().split("T")[0]};m(d=>[...d,y])}T(!1),v(null)},P=t=>{confirm("정말로 이 세부진료과목을 삭제하시겠습니까?")&&m(r=>r.filter(s=>s.id!==t))},z=(t,r)=>{const s=l.find(u=>u.id===t);if(!s)return;const o=l.filter(u=>u.category===s.category),y=r==="up"?s.order-1:s.order+1,d=o.find(u=>u.order===y);d&&m(u=>u.map(f=>f.id===t?{...f,order:y}:f.id===d.id?{...f,order:s.order}:f))},$=t=>{m(r=>r.map(s=>s.id===t?{...s,status:s.status==="활성"?"비활성":"활성"}:s))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-indigo-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-indigo-800 bg-clip-text text-transparent",children:"세부진료과목 관리"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"각 진료과목의 세부 치료 항목을 관리할 수 있습니다"})]}),e.jsxs(M,{open:q,onOpenChange:T,children:[e.jsx(V,{asChild:!0,children:e.jsxs(x,{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 hover:from-indigo-600 hover:to-indigo-700",onClick:()=>v(H),children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"새 세부치료 추가"]})}),e.jsx(R,{detail:B,onSave:E,onCancel:()=>{T(!1),v(null)}})]})]})}),e.jsx(k,{children:e.jsx(A,{className:"p-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("div",{className:"flex-1 min-w-[300px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(N,{placeholder:"세부치료명이나 설명으로 검색...",value:j,onChange:t=>i(t.target.value),className:"pl-10"})]})}),e.jsxs(w,{value:c,onValueChange:b,children:[e.jsx(C,{className:"w-[180px]",children:e.jsx(D,{})}),e.jsxs(S,{children:[e.jsx(h,{value:"전체",children:"전체 진료과목"}),O.map(t=>e.jsx(h,{value:t.id,children:t.title},t.id))]})]}),e.jsxs(w,{value:a,onValueChange:t=>n(t),children:[e.jsx(C,{className:"w-[150px]",children:e.jsx(D,{})}),e.jsxs(S,{children:[e.jsx(h,{value:"전체",children:"전체 상태"}),e.jsx(h,{value:"활성",children:"활성"}),e.jsx(h,{value:"비활성",children:"비활성"})]})]})]})})}),e.jsx("div",{className:"space-y-6",children:Object.entries(I).map(([t,r])=>e.jsxs(k,{children:[e.jsx(Z,{children:e.jsxs(ee,{className:"text-lg text-indigo-700 flex items-center space-x-2",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{children:t}),e.jsxs(F,{variant:"outline",children:[r.length,"개"]})]})}),e.jsx(A,{children:e.jsx("div",{className:"space-y-3",children:r.map(s=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.title}),e.jsx(F,{variant:s.status==="활성"?"default":"secondary",children:s.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["#",s.order]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s.price&&e.jsxs("span",{children:["💰 ",s.price]}),s.duration&&e.jsxs("span",{children:["⏱️ ",s.duration]}),s.createdAt&&e.jsxs("span",{children:["📅 ",s.createdAt]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>z(s.id,"up"),disabled:s.order===1,children:e.jsx(X,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>z(s.id,"down"),disabled:s.order===Math.max(...r.map(o=>o.order)),children:e.jsx(_,{className:"w-4 h-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>$(s.id),className:s.status==="활성"?"text-green-600":"text-gray-600",children:s.status}),e.jsxs(M,{children:[e.jsx(V,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"sm",onClick:()=>v(s),children:e.jsx(J,{className:"w-4 h-4"})})}),e.jsx(R,{detail:s,onSave:E,onCancel:()=>v(null)})]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>P(s.id),className:"text-red-600 hover:bg-red-50",children:e.jsx(K,{className:"w-4 h-4"})})]})]})},s.id))})})]},t))}),Object.keys(I).length===0&&e.jsx(k,{children:e.jsxs(A,{className:"p-12 text-center",children:[e.jsx(L,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"세부치료가 없습니다"}),e.jsx("p",{className:"text-gray-600",children:"새로운 세부치료를 추가해보세요"})]})})]})}function R({detail:l,onSave:m,onCancel:j}){const[i,c]=g.useState(l||{id:"",title:"",category:"implant",description:"",order:1,status:"활성",price:"",duration:""});Q.useEffect(()=>{l&&c(l)},[l]);const b=()=>{if(!i.title.trim()){alert("세부치료명을 입력해주세요.");return}if(!i.description.trim()){alert("설명을 입력해주세요.");return}m(i)};return e.jsxs(se,{className:"max-w-2xl",children:[e.jsxs(te,{children:[e.jsx(re,{children:l?.id?"세부치료 편집":"새 세부치료 추가"}),e.jsx(ae,{children:l?.id?"기존 세부치료의 정보를 수정할 수 있습니다.":"새로운 세부치료를 추가하고 카테고리, 가격, 기간 정보를 설정하세요."})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"title",children:"세부치료명 *"}),e.jsx(N,{id:"title",value:i.title,onChange:a=>c(n=>({...n,title:a.target.value})),placeholder:"예: 일반 임플란트"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"category",children:"진료과목 *"}),e.jsxs(w,{value:i.category,onValueChange:a=>c(n=>({...n,category:a})),children:[e.jsx(C,{children:e.jsx(D,{})}),e.jsx(S,{children:O.map(a=>e.jsx(h,{value:a.id,children:a.title},a.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"description",children:"설명 *"}),e.jsx(ie,{id:"description",value:i.description,onChange:a=>c(n=>({...n,description:a.target.value})),placeholder:"세부치료에 대한 간단한 설명을 입력하세요",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"price",children:"치료비용"}),e.jsx(N,{id:"price",value:i.price||"",onChange:a=>c(n=>({...n,price:a.target.value})),placeholder:"예: 1,200,000원"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"duration",children:"치료기간"}),e.jsx(N,{id:"duration",value:i.duration||"",onChange:a=>c(n=>({...n,duration:a.target.value})),placeholder:"예: 3개월"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"status",children:"상태"}),e.jsxs(w,{value:i.status,onValueChange:a=>c(n=>({...n,status:a})),children:[e.jsx(C,{children:e.jsx(D,{})}),e.jsxs(S,{children:[e.jsx(h,{value:"활성",children:"활성"}),e.jsx(h,{value:"비활성",children:"비활성"})]})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsx(p,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"미리보기"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:i.title||"세부치료명"}),e.jsx(F,{variant:"default",children:i.status})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:i.description||"설명"}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.price&&e.jsxs("span",{children:["💰 ",i.price]}),i.duration&&e.jsxs("span",{children:["⏱️ ",i.duration]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs(x,{variant:"outline",onClick:j,children:[e.jsx(W,{className:"w-4 h-4 mr-2"}),"취소"]}),e.jsxs(x,{onClick:b,className:"bg-gradient-to-r from-indigo-500 to-indigo-600 hover:from-indigo-600 hover:to-indigo-700",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"저장"]})]})]})}export{xe as default};
