import{r as b,j as e,an as g,ag as P,e as B,w as O,h as _,ak as V,ay as H,d as U,al as z,G as K,l as G}from"./ui-ChaMvfLm.js";import{u as W,B as N,C as i,a as d,I as J,S as f,b as w,c as v,d as y,e as r,f as Q,g as X,T as Y,h as Z,i as u,j as c,k as $,l as t,n as k}from"./index-BwfpsJi4.js";import"./vendor-D3F3s8fL.js";import"./supabase-BXl3LOEh.js";function te(){const{state:C,dispatch:x}=W(),{inquiries:l,filters:T,loading:S}=C,a=T.inquiries,h=b.useMemo(()=>l.filter(s=>{const n=a.searchTerm===""||s.name.toLowerCase().includes(a.searchTerm.toLowerCase())||s.phone.includes(a.searchTerm)||s.subject.toLowerCase().includes(a.searchTerm.toLowerCase())||s.content.toLowerCase().includes(a.searchTerm.toLowerCase()),j=a.status==="all"||s.status===a.status,p=a.category==="all"||s.category===a.category;return n&&j&&p}).sort((s,n)=>new Date(n.createdAt).getTime()-new Date(s.createdAt).getTime()),[l,a]),m=b.useMemo(()=>{const s=l.length,n=l.filter(o=>o.status==="답변대기").length,j=l.filter(o=>o.status==="답변완료").length,p=l.filter(o=>{const R=new Date().toISOString().split("T")[0];return o.createdAt.startsWith(R)}).length;return{total:s,pending:n,completed:j,today:p}},[l]),A=s=>s==="답변완료"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",L=s=>({치료문의:"bg-blue-100 text-blue-800",예약문의:"bg-green-100 text-green-800",일반문의:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",D=s=>{x({type:"UPDATE_FILTERS",payload:{section:"inquiries",filters:{searchTerm:s}}})},E=s=>{x({type:"UPDATE_FILTERS",payload:{section:"inquiries",filters:{status:s}}})},I=s=>{x({type:"UPDATE_FILTERS",payload:{section:"inquiries",filters:{category:s}}})},M=s=>{x({type:"OPEN_MODAL",payload:{type:"inquiry-view",data:s}})},F=s=>{x({type:"OPEN_MODAL",payload:{type:"inquiry-answer",data:s}})};return S?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-pink-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent flex items-center",children:[e.jsx(g,{className:"w-6 h-6 mr-3 text-pink-600"}),"문의 관리"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"고객 문의를 신속하게 처리하세요"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(N,{variant:"outline",className:"border-pink-200 hover:bg-pink-50",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"엑셀 내보내기"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(i,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"전체 문의"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-800",children:[m.total,"건"]})]}),e.jsx(g,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-700 font-medium",children:"답변 대기"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-800",children:[m.pending,"건"]})]}),e.jsx(B,{className:"w-8 h-8 text-orange-600"})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-700 font-medium",children:"답변 완료"}),e.jsxs("p",{className:"text-2xl font-bold text-green-800",children:[m.completed,"건"]})]}),e.jsx(O,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-700 font-medium",children:"오늘 접수"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-800",children:[m.today,"건"]})]}),e.jsx(_,{className:"w-8 h-8 text-purple-600"})]})})})]}),e.jsx(i,{className:"shadow-lg border-0 bg-white",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(V,{className:"w-4 h-4 absolute left-3 top-3.5 text-gray-400"}),e.jsx(J,{placeholder:"이름, 제목, 내용으로 검색...",value:a.searchTerm,onChange:s=>D(s.target.value),className:"pl-10 border-pink-200 focus:ring-pink-500 focus:border-pink-500"})]}),e.jsxs(f,{value:a.status,onValueChange:E,children:[e.jsx(w,{className:"w-full md:w-48 border-pink-200",children:e.jsx(v,{placeholder:"상태별 필터"})}),e.jsxs(y,{children:[e.jsx(r,{value:"all",children:"전체 상태"}),e.jsx(r,{value:"답변대기",children:"답변 대기"}),e.jsx(r,{value:"답변완료",children:"답변 완료"})]})]}),e.jsxs(f,{value:a.category,onValueChange:I,children:[e.jsx(w,{className:"w-full md:w-48 border-pink-200",children:e.jsx(v,{placeholder:"분류별 필터"})}),e.jsxs(y,{children:[e.jsx(r,{value:"all",children:"전체 분류"}),e.jsx(r,{value:"치료문의",children:"치료 문의"}),e.jsx(r,{value:"예약문의",children:"예약 문의"}),e.jsx(r,{value:"일반문의",children:"일반 문의"})]})]})]})})}),e.jsxs(i,{className:"shadow-lg border-0 bg-white",children:[e.jsx(Q,{className:"bg-gradient-to-r from-pink-50 to-rose-50 border-b border-pink-100",children:e.jsx(X,{className:"text-pink-800 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"w-5 h-5 mr-2"}),"문의 목록 (",h.length,"건)"]})})}),e.jsx(d,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Y,{children:[e.jsx(Z,{className:"bg-pink-50",children:e.jsxs(u,{children:[e.jsx(c,{className:"font-semibold text-pink-800",children:"문의자 정보"}),e.jsx(c,{className:"font-semibold text-pink-800",children:"문의 내용"}),e.jsx(c,{className:"font-semibold text-pink-800",children:"분류"}),e.jsx(c,{className:"font-semibold text-pink-800",children:"상태"}),e.jsx(c,{className:"font-semibold text-pink-800",children:"접수일"}),e.jsx(c,{className:"font-semibold text-pink-800",children:"처리일"}),e.jsx(c,{className:"font-semibold text-pink-800",children:"관리"})]})}),e.jsx($,{children:h.length===0?e.jsx(u,{children:e.jsxs(t,{colSpan:7,className:"text-center py-8 text-gray-500",children:[e.jsx(H,{className:"w-8 h-8 mx-auto mb-2"}),"검색 조건에 맞는 문의가 없습니다."]})}):h.map(s=>e.jsxs(u,{className:"hover:bg-pink-50/30",children:[e.jsx(t,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center text-pink-600 font-bold",children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{children:s.phone})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[e.jsx(z,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-xs",children:s.email})]})]})]})]})}),e.jsx(t,{className:"max-w-md",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 line-clamp-1",children:s.subject}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.content})]})}),e.jsx(t,{children:e.jsx(k,{className:L(s.category),variant:"outline",children:s.category})}),e.jsx(t,{children:e.jsx(k,{className:A(s.status),variant:"outline",children:s.status})}),e.jsx(t,{children:e.jsx("span",{className:"text-sm text-gray-600",children:new Date(s.createdAt).toLocaleDateString("ko-KR")})}),e.jsx(t,{children:s.answeredAt?e.jsx("span",{className:"text-sm text-gray-600",children:new Date(s.answeredAt).toLocaleDateString("ko-KR")}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(N,{size:"sm",variant:"outline",className:"border-gray-300",onClick:()=>M(s),children:[e.jsx(K,{className:"w-3 h-3 mr-1"}),"상세"]}),s.status==="답변대기"&&e.jsxs(N,{size:"sm",className:"bg-pink-600 hover:bg-pink-700 text-white",onClick:()=>F(s),children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),"답변"]})]})})]},s.id))})]})})})]})]})}export{te as default};
